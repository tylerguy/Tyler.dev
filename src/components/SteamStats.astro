---
import { load } from 'astro/@types';
import { json } from 'astro/@types';
import { ref } from 'astro/@types';
import { timestamp } from 'astro/@types';

const apiKey = '63FFCE972386F2FAE3A524382D647460';
const steamId = '76561198380134304';

const { response: { games } } = await load(`https://api.steampowered.com/IPlayerService/GetOwnedGames/v1/?key=${apiKey}&steamid=${steamId}&format=json`);

let playedGames = ref(games);

---

<table>
  <thead>
    <tr>
      <th>Game Name</th>
      <th>Playtime (minutes)</th>
    </tr>
  </thead>
  <tbody>
    <script>
      for (let i = 0; i < playedGames.length; i++) {
        const game = playedGames[i];
        // Generate a table row for each game
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${game.name}</td>
          <td>${game.playtime_forever}</td>
        `;
        document.querySelector('tbody').appendChild(row);
      }
    </script>
  </tbody>
</table>
