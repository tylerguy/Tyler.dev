---
const apiKey = '63FFCE972386F2FAE3A524382D647460';
const steamId = '76561198380134304';
let games = [];

(async () => {
  const response = await fetch(`https://api.steampowered.com/IPlayerService/GetOwnedGames/v1/?key=${apiKey}&steamid=${steamId}&format=json`);
  const data = await response.json();
  games = data.response.games;
})();
---

<h1>Steam Games</h1>
<table>
  <thead>
    <tr>
      <th>Game Name</th>
      <th>Playtime (minutes)</th>
    </tr>
  </thead>
  <tbody>
    <script>
      games.forEach(game => {
        const row = document.createElement('tr');
        const nameCell = document.createElement('td');
        const playtimeCell = document.createElement('td');

        nameCell.textContent = game.name;
        playtimeCell.textContent = game.playtime_forever;

        row.appendChild(nameCell);
        row.appendChild(playtimeCell);

        document.querySelector('tbody').appendChild(row);
      });
    </script>
  </tbody>
</table>
